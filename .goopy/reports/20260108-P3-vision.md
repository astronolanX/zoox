# Vision Document - Goopy Beyond Session Memory

**Date:** 2026-01-08
**Priority:** P3 (Enhancement)
**Overall Confidence:** Variable (see per-item ratings)
**Auditor:** Claude Opus 4.5 (Visionary Agent)

---

## Executive Summary

Goopy's minimal blob architecture (5 types, 3 scopes, 4 statuses, ~850 LOC) presents an **unexpectedly powerful substrate** for applications far beyond session memory. The key insight: **blobs are a lightweight coordination protocol** with built-in relevance scoring, temporal awareness, and semantic linking.

---

## 1. Multi-Agent Swarm Coordination

### 1.1 Shared Context via CONSTRAINT Blobs
**Confidence:** 0.90 (High)

The ALWAYS-scoped CONSTRAINT type naturally serves as swarm-wide configuration. Each subagent reading from the same glob inherits identical constraints:

```xml
<blob type="constraint" scope="always">
  <summary>Swarm invariants</summary>
  <facts>
    <fact>Use GPT-4 for code, Claude for prose</fact>
    <fact>Maximum 3 parallel file writes</fact>
    <fact>Always validate JSON before commit</fact>
  </facts>
</blob>
```

### 1.2 Task Partitioning via THREAD Status
**Confidence:** 0.85 (High)

The status enum maps directly to work queue states:
- `ACTIVE` → Available for pickup
- `BLOCKED` → Waiting on dependency
- `DONE` → Completed, trigger dependents
- **NEW: `IN_PROGRESS`** → Claimed by agent

**Implementation:** Add one enum value, one line of code.

### 1.3 Consensus Building via VOTE Extension
**Confidence:** 0.60 (Medium)

Extend DECISION with voting metadata:
```xml
<votes>
  <vote agent="agent-1" choice="JWT" confidence="0.85"/>
  <vote agent="agent-2" choice="OAuth2" confidence="0.72"/>
</votes>
<threshold>0.7</threshold>
```

When threshold reached, blob transitions to `ratified` status.

---

## 2. Beyond Development: Domain Flexing

### 2.1 Design Workflows
**Confidence:** 0.88 (High)

| Design Concept | Goopy Mapping |
|----------------|---------------|
| Design exploration | THREAD ("Hero section exploration") |
| Design decision | DECISION ("Primary color: #FF6B35", why="Evokes energy") |
| Brand guidelines | CONSTRAINT ("Never use Comic Sans") |
| Design tokens | FACT ("Base spacing: 8px") |

**Files field for assets:**
```xml
<files>
  <file>assets/logo-primary.svg</file>
  <file>figma://file/abc123/frame/456</file>
</files>
```

### 2.2 Project Management
**Confidence:** 0.75 (Medium)

| PM Concept | Goopy Mapping |
|------------|---------------|
| Epic | THREAD with `related` refs to children |
| Story | THREAD (status: active/blocked/done) |
| Sprint | CONSTRAINT ("Sprint 23 ends 2025-01-15") |
| Acceptance criteria | FACT list within thread |
| Blockers | `blocked_by` field |

### 2.3 Personal Productivity
**Confidence:** 0.55 (Medium-Low)

Meal planning example:
- CONSTRAINT: Dietary restrictions ("No gluten")
- THREAD: Weekly plan (status: planning→shopping→cooking→done)
- FACT: Pantry inventory ("2 cans chickpeas")
- DECISION: Recipe choices ("Thai curry", why="Uses expiring coconut milk")

---

## 3. Scaling Innovations

### 3.1 Hierarchical Globs
**Confidence:** 0.82 (High)

For 10,000+ blobs, shard by date:
```
.claude/
  threads/
    2025-01/
    2025-02/
  decisions/
    2025-01/
```

Plus index file for O(1) lookups.

### 3.2 Time-Travel Snapshots
**Confidence:** 0.85 (High)

```bash
goopy snapshot "pre-refactor"  # Tag current state
goopy restore "pre-refactor"   # Restore tagged state
goopy diff "pre-refactor" HEAD # Show changes
```

Enables: "What was I thinking when I made this decision?"

### 3.3 Semantic Auto-Linking
**Confidence:** 0.65 (Medium)

Auto-populate `related` field via:
1. File overlap (3+ shared files = linked)
2. Summary embedding similarity
3. Citation parsing ("per [blob-name]")
4. Co-occurrence (frequently surfaced together)

### 3.4 Context Compression (Rollups)
**Confidence:** 0.70 (Medium)

Problem: 10 blobs * 500 tokens = 5000 tokens

Solution: LLM-generated summary blobs:
```xml
<blob type="rollup" scope="project">
  <summary>Authentication decisions (3 blobs)</summary>
  <context>Decided on JWT, bcrypt, Redis. See auth-* for details.</context>
  <related>
    <ref>auth-tokens</ref>
    <ref>auth-passwords</ref>
    <ref>auth-sessions</ref>
  </related>
</blob>
```

---

## 4. Speculative Innovations

### 4.1 CRDT Fields for Real-Time Collaboration
**Confidence:** 0.40 (Low)

Convert blob fields to conflict-free replicated data types:
- Grow-only sets for `facts`
- Last-writer-wins for `summary`
- Counter CRDTs for voting

### 4.2 Cross-Project Pattern Mining
**Confidence:** 0.45 (Low)

Aggregate blobs across projects to discover:
- "You always choose PostgreSQL. Consider when SQLite fits."
- "Authentication blocks you 40% of time. Template it?"
- "Projects with early constraints ship 2x faster."

### 4.3 Privacy-Preserving Shared Context
**Confidence:** 0.35 (Low)

- Encrypt blob content with per-team keys
- Share only hashed file references
- Homomorphic relevance scoring

---

## 5. Research Context

### Industry Trends

**Multi-agent architectures are rapidly growing** in enterprise AI adoption.
- Source: [Microsoft Agent Framework](https://developer.microsoft.com/blog/designing-multi-agent-intelligence) discusses design patterns for multi-agent systems
- Note: Specific adoption percentages vary by survey methodology

**The "disconnected models problem"** is the biggest barrier to autonomous agents.
- "To be autonomous you have to carry context through actions, but models are very disconnected."
- Source: Sam Schillace, Microsoft

### Existing Solutions Comparison

| Tool | Approach | Complexity | Goopy Differentiator |
|------|----------|------------|----------------------|
| [Claude-Mem](https://github.com/thedotmack/claude-mem) | SQLite + AI compression | High | Human-readable XML |
| [MCP Memory Service](https://github.com/doobidoo/mcp-memory-service) | Vector DB + embeddings | High | Zero dependencies |
| CLAUDE.md | Flat markdown | Low | Structured types, scoring |
| [Anthropic Memory](https://skywork.ai/blog/claude-memory-a-deep-dive-into-anthropics-persistent-context-solution/) | Native feature | Integrated | Local control, extensible |

---

## 6. Implementation Priority Matrix

| Innovation | Confidence | Complexity | Effort | Priority |
|------------|------------|------------|--------|----------|
| IN_PROGRESS status | 0.90 | Low | 1 day | P1 |
| Time-travel snapshots | 0.85 | Medium | 3 days | P2 |
| Design/PM mapping | 0.80 | None | Usage pattern | P3 |
| Hierarchical globs | 0.82 | High | 1 week | P2 |
| Semantic auto-linking | 0.65 | High | 1 week | P3 |
| Context compression | 0.70 | Medium | 4 days | P3 |
| Consensus/voting | 0.60 | Medium | 3 days | P3 |
| CRDT fields | 0.40 | Very High | 3 weeks | Future |
| Cross-project mining | 0.45 | High | 2 weeks | Future |

---

## 7. Recommended Next Steps

### Immediate (This Sprint)
1. Add `IN_PROGRESS` status for swarm work claiming
2. Document design/PM workflow patterns in README
3. Add `goopy snapshot` command for state tagging

### Near-term (Next Quarter)
4. Implement index.json for scaling
5. Add semantic auto-linking based on file overlap
6. Create blob templates for common patterns

### Long-term (Roadmap)
7. Context compression with rollup blobs
8. Cross-project pattern discovery
9. Optional sync/collaboration layer

---

## 8. Conclusion

Goopy's strength is its **intentional minimalism**. The vision is not to add features but to **enable emergent patterns**:

- Swarm coordination emerges from status + scope
- PM workflows emerge from thread + related refs
- Knowledge graphs emerge from file overlap + semantic linking

The goal: **remain lightweight while unlocking powerful use cases** through composable primitives.
