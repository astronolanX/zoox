~ type: context
~ id: context
~ version: 2
~ scope: session
@ 2026-01-16

--- surface
Fixed 887 tests after migrating reef from .claude/ directory to independent .reef/ structure with new file extensions (.reef, .rock) and directory layout.

--- decide
- Updated 5 test files to reference .reef/ directory and new file extensions instead of legacy .claude/ and .blob.xml: new reef infrastructure requires updated test expectations
- Fixed _iter_all_blobs() to use dynamic extensions via extension_for_type() instead of hardcoded .blob.xml: hardcoded extension breaks calcification metrics
- Modified calcification CLI tests to accept "No vitality data" responses when project has no polips: integration tests fail without actual project polips

--- next
- [ ] Optionally migrate polip data from .claude/ to .reef/ with new extensions (run `reef sync --fix` or manual script)
- [ ] Implement filesystem primitives plan (Phase 1-4) for atomic writes and event files in reef/fs.py module

--- file
- tests/test_absurd.py
- tests/test_bugs.py
- tests/test_security.py
- tests/test_calcification.py
- src/reef/calcification.py
