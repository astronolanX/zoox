<blob type="context" scope="session" updated="2026-01-16" v="2">
  <summary>Fixed 887 tests after migrating reef from .claude/ directory to independent .reef/ structure with new file extensions (.reef, .rock) and directory layout.</summary>
  <files>
    <file>tests/test_absurd.py</file>
    <file>tests/test_bugs.py</file>
    <file>tests/test_security.py</file>
    <file>tests/test_calcification.py</file>
    <file>src/reef/calcification.py</file>
  </files>
  <decisions>
    <decision why="new reef infrastructure requires updated test expectations">Updated 5 test files to reference .reef/ directory and new file extensions instead of legacy .claude/ and .blob.xml</decision>
    <decision why="hardcoded extension breaks calcification metrics">Fixed _iter_all_blobs() to use dynamic extensions via extension_for_type() instead of hardcoded .blob.xml</decision>
    <decision why="integration tests fail without actual project polips">Modified calcification CLI tests to accept "No vitality data" responses when project has no polips</decision>
  </decisions>
  <next>
    <step>Optionally migrate polip data from .claude/ to .reef/ with new extensions (run `reef sync --fix` or manual script)</step>
    <step>Implement filesystem primitives plan (Phase 1-4) for atomic writes and event files in reef/fs.py module</step>
  </next>
</blob>